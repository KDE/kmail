### Identity KCM, eventually to be moved out of KMail ###

include_directories( ${CMAKE_CURRENT_SOURCE_DIR}/.. ${CMAKE_CURRENT_SOURCE_DIR}/../identity )
add_definitions( -DKCM_KPIMIDENTITIES_STANDALONE )
set(kcm_identities_srcs
  kcm_kpimidentities.cpp
  ../job/addressvalidationjob.cpp
  ../identity/identitypage.cpp
  ../identity/identitydialog.cpp
  ../identity/identitylistview.cpp
  ../identity/newidentitydialog.cpp
  ../identity/identityeditvcarddialog.cpp
  ../identity/identityaddvcarddialog.cpp
  ../identity/xfaceconfigurator.cpp
)

qt5_wrap_ui(kcm_identities_srcs ../ui/identitypage.ui)
add_library(kcm_kpimidentities MODULE ${kcm_identities_srcs})
target_link_libraries(kcm_kpimidentities
  ${KDEPIMLIBS_GPGMEPP_LIBS}
  KF5::AkonadiCore
  KF5::PimIdentities
  KF5::MailTransport
  KF5::KCMUtils
  KF5::KIOCore
  akonadi_next
  mailcommon
  messagecomposer
  messageviewer
  templateparser
  pimcommon
  kleo
  kdepim
)

install(FILES kcm_kpimidentities.desktop DESTINATION ${SERVICES_INSTALL_DIR})
install(TARGETS kcm_kpimidentities DESTINATION ${PLUGIN_INSTALL_DIR})
