AC_MSG_CHECKING([whether Qt was compiled with STL support])

AC_LANG_SAVE
AC_LANG_CPLUSPLUS

kdepim_ac_cxxflags_safe="$CXXFLAGS"
CXXFLAGS="$CXXFLAGS -I$qt_incdir $all_includes -UQT_NO_STL"

AC_TRY_COMPILE([
	#include <qstringlist.h>
], [
	QStringList::const_iterator::iterator_category itc;
], [
	AC_MSG_RESULT([yes])
], [
	AC_MSG_RESULT([no])
	AC_MSG_ERROR([
STL algorithms don't work on container classes from your Qt.
Please compile Qt with the standard -stl option to ./configure
and make sure you don't use -no-stl.])
])

CXXFLAGS="$kdepim_ac_cxxflags_safe"

AC_LANG_RESTORE
