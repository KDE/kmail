
CXX	=	@CXX@
CCLIENT	=	/usr/local/src/c-client
INCLUDES=	-I.. @all_includes@ -I$(CCLIENT)
CXXFLAGS=	@CXXFLAGS@ -DHAVE_CONFIG_H -DKDEDIR="$(KDEDIR)" $(INCLUDES)
LDFLAGS	=	@LDFLAGS@ $(CCLIENT)/c-client.a @all_libraries@ -lkdeui -lkdecore -lkhtmlw\
-lqt -lXext  
BIN	=	kmail
MOC	=	@MOC@
install =	@INSTALL@
INSTALL = 	$(install) -m 0755
INSTALL_DATA = 	$(install) -m 0644
INSTALL_DIR = 	$(install) -d -m 0755

prefix	= 	@prefix@
bindir	= 	$(prefix)/bin

SRCS=kmmainwin.cpp callback.cpp mclass.cpp kmfolderdia.cpp kmfoldertree.cpp kmsettings.cpp util.cpp kmaccount.cpp kmheaders.cpp ktablistbox.cpp kmcomposewin.cpp\
kmreaderwin.cpp mutil.cpp kbusyptr.cpp kalarmtimer.cpp KEdit.cpp
OBJS=kmmainwin.o callback.o mclass.o kmfolderdia.o kmfoldertree.o kmsettings.o util.o kmaccount.o kmheaders.o ktablistbox.o kmcomposewin.o mutil.o kbusyptr.o kalarmtimer.o KEdit.o kmreaderwin.o
HDRS=kmmainwin.h mclass.h kmfolderdia.h kmfoldertree.h kmsettings.h util.h kmaccount.h kmheaders.h ktablistbox.h kmcomposewin.h mutil.h kbusyptr.h kalarmtimer.h KEdit.h kmreaderwin.h
MOCS=kmmainwin.moc kmfolderdia.moc kmfoldertree.moc kmsettings.moc kmheaders.moc ktablistbox.moc kmcomposewin.moc kbusyptr.moc kalarmtimer.moc KEdit.moc kmreaderwin.moc

.PHONY: clean depend
.SUFFIXES: .cpp

all: $(BIN)

Makefile: Makefile.in
	cd .. && CONFIG_FILES=kmail/$@ CONFIG_HEADERS= $(SHELL) ./config.status

.cpp.o:
	$(CXX) -c $(CXXFLAGS) $<

$(BIN): $(SRCS) $(HDRS) $(MOCS) $(OBJS)
	$(CXX) -o $(BIN) $(OBJS) $(LDFLAGS)

%.moc:	%.h
	$(MOC) -o $@ $<

clean:
	rm -f $(OBJS) $(BIN) $(MOCS) *~ core .tedfilepos

install: $(BIN)
	$(INSTALL) $(BIN) $(bindir)
	
uninstall: 
	rm -rf $(bindir)/$(BIN)

depend:
	@touch .depend
	makedepend -f.depend -I$(INCLUDES) $(SRCS) 2> /dev/null

-include .depend
